(function(){var c=Handlebars.template;(Handlebars.templates=Handlebars.templates||{})["authenticated-header-template"]=c({compiler:[7,">= 4.0.0"],main:function(b,a,c,d,e){return'\t<a title="'+b.escapeExpression(b.lambda(null!=a?a.name:a,a))+'" href="https://www.twitter.com/'+b.escapeExpression(b.lambda(null!=a?a.screen_name:a,a))+'" target="_blank"><img  src="'+b.escapeExpression(b.lambda(null!=a?a.profile_image_url:a,a))+'" /></a>\t\t\t\t'},useData:!0})})();
(function(){var h=Handlebars.template;(Handlebars.templates=Handlebars.templates||{})["direct-message-breadcrumb-template"]=h({compiler:[7,">= 4.0.0"],main:function(d,a,e,g,f){var c;return'\t\t\t<div style="margin:12px 0">\n'+(null!=(c=e["if"].call(a,null!=a?a.name:a,{name:"if",hash:{},fn:d.program(1,f,0),inverse:d.noop,data:f}))?c:"")+(null!=(c=e["if"].call(a,null!=a?a.sentKeyWarning:a,{name:"if",hash:{},fn:d.program(4,f,0),inverse:d.noop,data:f}))?c:"")+"\t\t\t</div>\n"},1:function(d,a,e,g,f){var c,
b;return(null!=(c=e["if"].call(a,null!=a?a.publicKey:a,{name:"if",hash:{},fn:d.program(2,f,0),inverse:d.noop,data:f}))?c:"")+"\t\t\t\t<br/>Not sure if "+d.escapeExpression((b=null!=(b=e.name||(null!=a?a.name:a))?b:e.helperMissing,"function"===typeof b?b.call(a,{name:"name",hash:{},data:f}):b))+' has your public key?  <input type=button onClick="app.initiateDirectMessages('+d.escapeExpression((b=null!=(b=e.id_str||(null!=a?a.id_str:a))?b:e.helperMissing,"function"===typeof b?b.call(a,{name:"id_str",
hash:{},data:f}):b))+',true)" value="send it"/>  ('+d.escapeExpression((b=null!=(b=e.name||(null!=a?a.name:a))?b:e.helperMissing,"function"===typeof b?b.call(a,{name:"name",hash:{},data:f}):b))+" can't send you encryted messages until you have sent them your key)\n"},2:function(d,a,e,g,f){var c,b;return"\t\t\t\t\t\x3c!--<br/>"+d.escapeExpression((b=null!=(b=e.name||(null!=a?a.name:a))?b:e.helperMissing,"function"===typeof b?b.call(a,{name:"name",hash:{},data:f}):b))+" sent you an encryption key on "+
d.escapeExpression(d.lambda(null!=(c=null!=a?a.publicKey:a)?c.displayDate:c,a))+". --\x3e\n"},4:function(d,a,e,g,f){var c;return"\t\t\t\t<br/>Your current public key is newer than the key you last sent to "+d.escapeExpression((c=null!=(c=e.name||(null!=a?a.name:a))?c:e.helperMissing,"function"===typeof c?c.call(a,{name:"name",hash:{},data:f}):c))+". \n"},useData:!0})})();
(function(){var d=Handlebars.template;(Handlebars.templates=Handlebars.templates||{})["direct-message-button-template"]=d({compiler:[7,">= 4.0.0"],main:function(e,b,c,d,f){var a;return" \t\t\t<input type=button onClick=\"app.setDirectMessageReceiver('"+e.escapeExpression((a=null!=(a=c.id_str||(null!=b?b.id_str:b))?a:c.helperMissing,"function"===typeof a?a.call(b,{name:"id_str",hash:{},data:f}):a))+"','"+e.escapeExpression((a=null!=(a=c.screen_name||(null!=b?b.screen_name:b))?a:c.helperMissing,"function"===
typeof a?a.call(b,{name:"screen_name",hash:{},data:f}):a))+'\');app.setView(app.DIRECT_MESSAGES_VIEW);" value="Message"/>'},useData:!0})})();
(function(){var c=Handlebars.template;(Handlebars.templates=Handlebars.templates||{})["direct-message-friend-name"]=c({compiler:[7,">= 4.0.0"],main:function(c,b,d,f,e){var a;return'\t\t\t\t<div class="breadCrumbSeparator"><li class="fa fa-long-arrow-right"></li></div>  from '+c.escapeExpression((a=null!=(a=d.name||(null!=b?b.name:b))?a:d.helperMissing,"function"===typeof a?a.call(b,{name:"name",hash:{},data:e}):a))+"\n"},useData:!0})})();
(function(){var h=Handlebars.template;(Handlebars.templates=Handlebars.templates||{})["direct-message-template"]=h({compiler:[7,">= 4.0.0"],main:function(d,a,c,g,f){var e,b;return'\t\t\t<div id="directMessageForm">\n\t\t\t\t\t\tSend direct message to <span id="directMessageTarget">'+d.escapeExpression((b=null!=(b=c.receiverName||(null!=a?a.receiverName:a))?b:c.helperMissing,"function"===typeof b?b.call(a,{name:"receiverName",hash:{},data:f}):b))+'</span><p/>\n\t\t\t\t\t\t<textarea id="directMessage"></textarea>\n\t\t\t\t\t\t<input type=hidden id="directMessageReceiverId" value="'+
d.escapeExpression((b=null!=(b=c.receiverId||(null!=a?a.receiverId:a))?b:c.helperMissing,"function"===typeof b?b.call(a,{name:"receiverId",hash:{},data:f}):b))+'" />\n\t\t\t\t\t\t<br/>\n\t\t\t\t\t\t<input type=button onClick="app.prepareDirectMessage(\''+d.escapeExpression((b=null!=(b=c.receiverId||(null!=a?a.receiverId:a))?b:c.helperMissing,"function"===typeof b?b.call(a,{name:"receiverId",hash:{},data:f}):b))+'\')" value="Send message"/>\n\t\t\t\t\t\t<p/>\n\t\t\t\t<br/>Not sure if '+d.escapeExpression((b=
null!=(b=c.receiverName||(null!=a?a.receiverName:a))?b:c.helperMissing,"function"===typeof b?b.call(a,{name:"receiverName",hash:{},data:f}):b))+' has your public key?  <input type=button onClick="app.initiateDirectMessages('+d.escapeExpression((b=null!=(b=c.receiverId||(null!=a?a.receiverId:a))?b:c.helperMissing,"function"===typeof b?b.call(a,{name:"receiverId",hash:{},data:f}):b))+',true)" value="send it"/>  ('+d.escapeExpression((b=null!=(b=c.receiverName||(null!=a?a.receiverName:a))?b:c.helperMissing,
"function"===typeof b?b.call(a,{name:"receiverName",hash:{},data:f}):b))+" can't send you encryted messages until you have sent them your key)\n"+(null!=(e=c["if"].call(a,null!=a?a.publicKey:a,{name:"if",hash:{},fn:d.program(1,f,0),inverse:d.noop,data:f}))?e:"")+(null!=(e=c["if"].call(a,null!=a?a.sentKeyWarning:a,{name:"if",hash:{},fn:d.program(3,f,0),inverse:d.noop,data:f}))?e:"")+"\t\t\t</div>\n"},1:function(d,a,c,g,f){var e,b;return"\t\t\t\t<br/>"+d.escapeExpression((b=null!=(b=c.receiverName||
(null!=a?a.receiverName:a))?b:c.helperMissing,"function"===typeof b?b.call(a,{name:"receiverName",hash:{},data:f}):b))+" sent you an encryption key on "+d.escapeExpression(d.lambda(null!=(e=null!=a?a.publicKey:a)?e.displayDate:e,a))+".\n"},3:function(d,a,c,g,f){var e;return"\t\t\t\t<br/>Your current public key is newer than the key you last sent to "+d.escapeExpression((e=null!=(e=c.receiverName||(null!=a?a.receiverName:a))?e:c.helperMissing,"function"===typeof e?e.call(a,{name:"receiverName",hash:{},
data:f}):e))+". \n"},useData:!0})})();
(function(){var h=Handlebars.template;(Handlebars.templates=Handlebars.templates||{})["direct-messages-template"]=h({compiler:[7,">= 4.0.0"],main:function(c,a,e,g,d){var b;return null!=(b=e.blockHelperMissing.call(a,c.lambda(a,a),{name:".",hash:{},fn:c.program(1,d,0),inverse:c.noop,data:d}))?b:""},1:function(c,a,e,g,d){var b;return'\t\t\t\t\t<div class="container dmMessageDiv dm_'+c.escapeExpression(c.lambda(null!=(b=null!=a?a.sender:a)?b.id_str:b,a))+'">\n\t\t\t\t\t\t<div class="bubbleImageLeft"><img src="'+
c.escapeExpression(c.lambda(null!=(b=null!=a?a.sender:a)?b.profile_image_url:b,a))+'" /></div>\n\t\t\t\t\t\t<div class="directMessageContainer bubbleLeft">\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\tMessage from\n\t\t\t\t\t\t\t\t<span><a href="javascript:app.setDirectMessageReceiver(\''+c.escapeExpression(c.lambda(null!=(b=null!=a?a.sender:a)?b.id_str:b,a))+"','"+c.escapeExpression(c.lambda(null!=(b=null!=a?a.sender:a)?b.screen_name:b,a))+"')\">"+c.escapeExpression(c.lambda(null!=(b=null!=a?a.sender:a)?
b.screen_name:b,a))+"</a>  "+c.escapeExpression((e.tweetShortDate||a&&a.tweetShortDate||e.helperMissing).call(a,null!=a?a.created_at:a,{name:"tweetShortDate",hash:{},data:d}))+"  \n"+(null!=(b=e["if"].call(a,null!=a?a.decryptionSuccessful:a,{name:"if",hash:{},fn:c.program(2,d,0),inverse:c.noop,data:d}))?b:"")+(null!=(b=e["if"].call(a,null!=a?a.signed:a,{name:"if",hash:{},fn:c.program(4,d,0),inverse:c.noop,data:d}))?b:"")+'\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<div class="directMessage">'+(null!=
(b=e["if"].call(a,null!=a?a.decryptionSuccessful:a,{name:"if",hash:{},fn:c.program(6,d,0),inverse:c.program(8,d,0),data:d}))?b:"")+"</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n"},2:function(c,a,e,g,d){return'\t\t\t\t\t\t\t\t<img src="img/encrypted.png" class="dmIcon" />\n'},4:function(c,a,e,g,d){return'\t\t\t\t\t\t\t\t<img src="img/signed.jpg" class="dmIcon" />\n'},6:function(c,a,e,g,d){var b;return"\n\t\t\t\t\t\t\t\t"+c.escapeExpression((b=null!=(b=e.seecret||(null!=a?a.seecret:
a))?b:e.helperMissing,"function"===typeof b?b.call(a,{name:"seecret",hash:{},data:d}):b))+"\n"},8:function(c,a,e,g,d){var b,f;return"\t\t\t\t\t\t\t\t"+(null!=(b=(f=null!=(f=e.text||(null!=a?a.text:a))?f:e.helperMissing,"function"===typeof f?f.call(a,{name:"text",hash:{},data:d}):f))?b:"")+"\n\t\t\t\t\t\t\t\t"},useData:!0})})();
(function(){var a=Handlebars.template;(Handlebars.templates=Handlebars.templates||{})["hashes-not-found-template"]=a({compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){return'\t\t<h2 class="timeLine">File hashes</h2>\n\t\t<br/><br/>\n\t\t<span style="color:red;font-size:1.5em">WARNING</span>: \n\t\t<div style="font-weight:bold;font-size:1.5em;display:inline;">UNABLE to load or process the file hashes.txt</div>\n\t\t<p/><br/><br/>\n\t\tThis means that something is wrong with this installation of Seecret and the contents may have been compromised.  <span style="font-weight:bold">Do not use this app.</span><p/><br/>\n\t\t<p/>\n\t\tRead more at <a href="https://www.seecret.net" target="_new">https://www.seecret.net</a> to learn about Seecret mirror sites and how to validate them.'},
useData:!0})})();
(function(){var f=Handlebars.template;(Handlebars.templates=Handlebars.templates||{})["hashes-template"]=f({compiler:[7,">= 4.0.0"],main:function(d,b,c,f,e){var a;return'\t\t<h2 class="timeLine">File hashes</h2>\n\t\t<br/>\n\t\tYou are using Seecret version 1.0\n\t\t<br/><br/>\n\t\t<div style="font-weight:bold;font-size:1.3em">If you are using the direct messages feature in Seecret, please pay close attention to the following information</div>\n\t\t<p/><br/>\n\t\t\tYou can verify the integrity of the major components of this application with the SHA1 values listed below.  You can also follow <a href="https://twitter.com/seecretapp" target="_new">Seecret on Twitter</a> for any news about compromised Seecret mirrors.  Read more at <a href="https://www.seecret.net/mirror.html" target="_new">https://www.seecret.net/mirror.html</a><p/><br/>\n\t\t<ol style="list-style-type: decimal;padding-left:20px;">\n'+
(null!=(a=c.blockHelperMissing.call(b,d.lambda(b,b),{name:".",hash:{},fn:d.program(1,e,0),inverse:d.noop,data:e}))?a:"")+'\t\t</ol>\n\t\t<p/>\n\t\t<br/>\n\t\tThe source of the hash values presented here is:  <a href="hashes.txt" target="_new">hashes.txt</a><p/><br/>\n\t\tThese SHA1 hash values (as well as the SHA1 hash value for hashes.txt itself) are also listed at the following locations:<p/>\n\t\t<ul>\n\t\t<li style="padding:5px;"><a href="https://www.seecret.net/mirror.html">https://www.seecret.net/mirror.html</a></li>\n        <li style="padding:5px;"><a href="https://github.com/simpledynamics/seecret_app">https://github.com/simpledynamics/seecret_app</a></li>\t\t\n\t\t<li style="padding:5px;"><a href="https://www.twitter.com/seecretapp">https://www.twitter.com/seecretapp</a></li>\n\t\t<li style="padding:5px;"><a href="https://www.facebook.com/Seecret-1780007618900168/info?tab=page_info">https://www.facebook.com/Seecret-1780007618900168/</a></li>\n\t\t<li style="padding:5px;"><a href="https://www.simpledynamics.net/seecret_hashes.html">https://www.simpledynamics.net/seecret_hashes.html</a></li>\n\t\t<li style="padding:5px;">More to\u200d\u200d\u200c\u200c\u200b\u200b\u200b\u200c\u200d\u200c\u200c\u200b\u200c\u200b\u200b\u200b\u200d\u200c\u200c\u200c\u200b\u200c\u200b\u200b\u200d\u200c\u200c\u200c\u200b\u200c\u200b\u200b\u200d\u200c\u200c\u200c\u200b\u200b\u200b\u200b\u200d\u200c\u200c\u200c\u200b\u200b\u200c\u200c\u200d\u200c\u200c\u200c\u200b\u200c\u200b\u200d\u200c\u200b\u200c\u200c\u200c\u200c\u200d\u200c\u200b\u200c\u200c\u200c\u200c\u200d\u200c\u200c\u200b\u200b\u200c\u200c\u200c\u200d\u200c\u200c\u200b\u200c\u200b\u200b\u200c\u200d\u200c\u200c\u200c\u200b\u200b\u200c\u200c\u200d\u200c\u200c\u200c\u200b\u200c\u200b\u200b\u200d\u200c\u200b\u200c\u200c\u200c\u200b\u200d\u200c\u200c\u200b\u200b\u200c\u200c\u200c\u200d\u200c\u200c\u200b\u200c\u200b\u200b\u200c\u200d\u200c\u200c\u200c\u200b\u200c\u200b\u200b\u200d\u200c\u200c\u200b\u200c\u200b\u200b\u200b\u200d\u200c\u200c\u200c\u200b\u200c\u200b\u200c\u200d\u200c\u200c\u200b\u200b\u200b\u200c\u200b\u200d\u200c\u200b\u200c\u200c\u200c\u200b\u200d\u200c\u200c\u200b\u200b\u200b\u200c\u200c\u200d\u200c\u200c\u200b\u200c\u200c\u200c\u200c\u200d\u200c\u200c\u200b\u200c\u200c\u200b\u200c\u200d\u200c\u200b\u200c\u200c\u200c\u200c\u200d\u200c\u200c\u200b\u200c\u200c\u200c\u200b\u200d\u200c\u200c\u200b\u200b\u200b\u200b\u200c\u200d\u200c\u200c\u200c\u200b\u200c\u200b\u200b\u200d\u200c\u200c\u200b\u200b\u200c\u200b\u200c\u200d\u200c\u200c\u200b\u200b\u200c\u200c\u200c\u200d\u200c\u200c\u200c\u200b\u200b\u200c\u200b\u200d\u200c\u200c\u200b\u200c\u200c\u200c\u200c\u200d\u200c\u200c\u200c\u200b\u200c\u200c\u200b\u200d\u200c\u200c\u200b\u200b\u200c\u200b\u200c\u200d\u200c\u200c\u200c\u200b\u200b\u200c\u200b\u200d\u200c\u200b\u200c\u200c\u200c\u200c\u200d\u200c\u200c\u200b\u200b\u200b\u200c\u200d\u200c\u200c\u200b\u200c\u200c\u200b\u200d\u200c\u200c\u200b\u200b\u200b\u200c\u200b\u200d\u200c\u200c\u200c\u200b\u200b\u200b\u200d\u200c\u200c\u200b\u200c\u200b\u200b\u200d\u200c\u200c\u200b\u200c\u200c\u200b\u200d\u200c\u200c\u200b\u200c\u200c\u200c\u200d\u200c\u200c\u200b\u200b\u200b\u200b\u200d\u200c\u200c\u200b\u200b\u200c\u200b\u200c\u200d\u200c\u200c\u200b\u200b\u200c\u200c\u200b\u200d\u200c\u200c\u200b\u200b\u200b\u200c\u200d\u200c\u200c\u200b\u200b\u200c\u200c\u200b\u200d\u200c\u200c\u200b\u200c\u200b\u200b\u200d\u200c\u200c\u200b\u200b\u200c\u200c\u200d\u200c\u200c\u200b\u200b\u200c\u200c\u200b\u200d\u200c\u200c\u200c\u200b\u200b\u200b\u200d\u200c\u200c\u200b\u200b\u200c\u200c\u200b\u200d\u200c\u200c\u200b\u200c\u200b\u200c\u200d\u200c\u200c\u200b\u200b\u200c\u200b\u200b\u200d\u200c\u200c\u200b\u200b\u200b\u200c\u200b\u200d\u200c\u200c\u200b\u200b\u200b\u200c\u200c\u200d\u200c\u200c\u200b\u200b\u200c\u200b\u200d\u200c\u200c\u200b\u200b\u200b\u200c\u200d\u200c\u200c\u200c\u200b\u200b\u200c\u200d\u200c\u200c\u200b\u200b\u200b\u200c\u200b\u200d\u200c\u200c\u200b\u200b\u200c\u200c\u200d\u200c\u200c\u200b\u200c\u200c\u200c\u200d\u200c\u200c\u200b\u200b\u200c\u200c\u200d\u200c\u200c\u200b\u200c\u200c\u200b\u200d\u200c\u200c\u200b\u200c\u200c\u200c\u200d\u200c\u200c\u200c\u200b\u200b\u200b\u200d\u200c\u200c\u200b\u200c\u200c\u200c\u200d\u200d\u200d come...</li>\n\t\t</ul>\n\t\t<br/><br/>\n\t\tIMPORTANT!\n\t\t<br/>\n\t\tIf you are using a Seecret mirror from a location other than https://www.seecret.io, the contents of <a href="js/oauthio_key.js" target="_new">js/oauthio_key.js</a> might be different.  That might be ok it could just mean the mirror site is authenticating to Twitter with it\'s own paid Oauth.io account.  But the file itself should look something like this:\n\t\t<br/><br/>\n\t\t<div style="padding:10px;padding-left:20px;background-color:#EFEFEF;font-face:arial">\n\t\t<pre>\n\t\t\n var oauthio_key={\n\tkey: \'D-G71uLuTzHet-_Km8m5RzH49d8\'\n }\t\t\n\t\t</pre>\n\t\t</div>\n\t\t<br/>\n\t\tThe key value itself could be different. That doesn\'t matter.  But if you see more code than the lines above, be concerned. \n\t\t'},
1:function(d,b,c,f,e){var a;return'\t\t<li style="margin:12px;"> - SHA1 hash for <a href="'+d.escapeExpression((a=null!=(a=c.name||(null!=b?b.name:b))?a:c.helperMissing,"function"===typeof a?a.call(b,{name:"name",hash:{},data:e}):a))+'" target="_new">'+d.escapeExpression((a=null!=(a=c.name||(null!=b?b.name:b))?a:c.helperMissing,"function"===typeof a?a.call(b,{name:"name",hash:{},data:e}):a))+'</a>\n\t\t<div style="padding:3px;margin:5px;background-color:#DEDEDE;border:1px solid #AAA;">'+d.escapeExpression((a=
null!=(a=c.value||(null!=b?b.value:b))?a:c.helperMissing,"function"===typeof a?a.call(b,{name:"value",hash:{},data:e}):a))+"</div>\n\t\t</li>\n"},useData:!0})})();
(function(){var a=Handlebars.template;(Handlebars.templates=Handlebars.templates||{})["no-more-direct-messages-template"]=a({compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){return'<div style="font-weight:bold">You have reached the very first direct message to you.  There are no more.</div>'},useData:!0})})();
(function(){var a=Handlebars.template;(Handlebars.templates=Handlebars.templates||{})["no-more-timeline-message-template"]=a({compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){return'<div style="font-weight:bold">You have reached the very first message of this timeline.  There are no more.</div>'},useData:!0})})();
(function(){var a=Handlebars.template;(Handlebars.templates=Handlebars.templates||{})["no-seecrets-in-direct-messages-template"]=a({compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){return'<div style="font-weight:bold">There were no Seecrets found in the last 200 direct messages.</div>'},useData:!0})})();
(function(){var a=Handlebars.template;(Handlebars.templates=Handlebars.templates||{})["no-seecrets-in-timeline-segment-template"]=a({compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){return'<div style="font-weight:bold">There were no Seecrets found in the last 200 tweets in the timeline.</div>'},useData:!0})})();
(function(){var a=Handlebars.template;(Handlebars.templates=Handlebars.templates||{})["private-key-template"]=a({compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){return'\t\t\t<div id="privateKeyManager">\n\t\t\t\tNo private key.  (You either deleted it or the initial gen failed).  Go to the <a href="javascript:app.setView(app.SETTINGS_VIEW)">Settings</a> and regenerate your private key to activate direct messaging on Seecret.  \n\t\t\t</div>\n'},useData:!0})})();
(function(){var f=Handlebars.template;(Handlebars.templates=Handlebars.templates||{})["public-key-pending-template"]=f({compiler:[7,">= 4.0.0"],main:function(d,b,c,f,e){var a;return'\t\t\t\t<div id="publicKeyManager" class="container">\n\t\t\t\t'+d.escapeExpression((a=null!=(a=c.receiver_name||(null!=b?b.receiver_name:b))?a:c.helperMissing,"function"===typeof a?a.call(b,{name:"receiver_name",hash:{},data:e}):a))+" has not yet connected with you over Seecret.  Once they install Seecret you can both send secure encrypted direct messages.<br/>  \n\t\t\t\tYou sent "+
d.escapeExpression((a=null!=(a=c.receiver_name||(null!=b?b.receiver_name:b))?a:c.helperMissing,"function"===typeof a?a.call(b,{name:"receiver_name",hash:{},data:e}):a))+" an invite on "+d.escapeExpression((a=null!=(a=c.invite_date||(null!=b?b.invite_date:b))?a:c.helperMissing,"function"===typeof a?a.call(b,{name:"invite_date",hash:{},data:e}):a))+' <span style="font-style:italic">from this device</span>.  You can resend the invite if you like.  <span id="sendPublicKeyButtonContainer"><input type=button id="sendPublicKeyButton" value="Send it" onClick="app.initiateDirectMessages('+
d.escapeExpression((a=null!=(a=c.receiver_id||(null!=b?b.receiver_id:b))?a:c.helperMissing,"function"===typeof a?a.call(b,{name:"receiver_id",hash:{},data:e}):a))+',true)"/></span>\n\t\t\t\t</div>\n'},useData:!0})})();
(function(){var f=Handlebars.template;(Handlebars.templates=Handlebars.templates||{})["public-key-template"]=f({compiler:[7,">= 4.0.0"],main:function(d,b,c,f,e){var a;return'\t\t\t\t<div id="publicKeyManager" class="container">\n\t\t\t\t\tDo you want to ask '+d.escapeExpression((a=null!=(a=c.receiver_name||(null!=b?b.receiver_name:b))?a:c.helperMissing,"function"===typeof a?a.call(b,{name:"receiver_name",hash:{},data:e}):a))+' to message you with Seecret?\n\t\t\t\t\t<input type=button value="YES" onClick="app.initiateDirectMessages('+
d.escapeExpression((a=null!=(a=c.receiver_id||(null!=b?b.receiver_id:b))?a:c.helperMissing,"function"===typeof a?a.call(b,{name:"receiver_id",hash:{},data:e}):a))+')"/>.  \n\t\t\t\t\t<br/> '+d.escapeExpression((a=null!=(a=c.receiver_name||(null!=b?b.receiver_name:b))?a:c.helperMissing,"function"===typeof a?a.call(b,{name:"receiver_name",hash:{},data:e}):a))+' will receive an invite and a Seecret key that will allow you to send and receive encrypted messages.  Read more in the <a href="https://www.seecret.net/faq.html" target="_new">FAQ</a>\n\t\t\t\t</div>\n'},
useData:!0})})();
(function(){var f=Handlebars.template;(Handlebars.templates=Handlebars.templates||{})["public-keys-template"]=f({compiler:[7,">= 4.0.0"],main:function(d,b,c,f,e){var a;return null!=(a=c.each.call(b,null!=b?b.keys:b,{name:"each",hash:{},fn:d.program(1,e,0),inverse:d.noop,data:e}))?a:""},1:function(d,b,c,f,e){var a;return'\t\t\t\t<div class="keyDisplayContainer">\n\t\t\t\t\t<br/><br/>\n\t\t\t\t\tFrom <a href="javascript:app.setDirectMessageReceiver(\''+d.escapeExpression((a=null!=(a=c.id_str||(null!=
b?b.id_str:b))?a:c.helperMissing,"function"===typeof a?a.call(b,{name:"id_str",hash:{},data:e}):a))+"','"+d.escapeExpression((a=null!=(a=c.screen_name||(null!=b?b.screen_name:b))?a:c.helperMissing,"function"===typeof a?a.call(b,{name:"screen_name",hash:{},data:e}):a))+"');app.setView(app.DIRECT_MESSAGES_VIEW);\">"+d.escapeExpression((a=null!=(a=c.screen_name||(null!=b?b.screen_name:b))?a:c.helperMissing,"function"===typeof a?a.call(b,{name:"screen_name",hash:{},data:e}):a))+"</a> sent on "+d.escapeExpression((a=
null!=(a=c.displayDate||(null!=b?b.displayDate:b))?a:c.helperMissing,"function"===typeof a?a.call(b,{name:"displayDate",hash:{},data:e}):a))+'.\n\t\t\t\t\t<pre class="keyDisplay" id="keyDisplay_'+d.escapeExpression((a=null!=(a=c.id_str||(null!=b?b.id_str:b))?a:c.helperMissing,"function"===typeof a?a.call(b,{name:"id_str",hash:{},data:e}):a))+'">'+d.escapeExpression((a=null!=(a=c.key||(null!=b?b.key:b))?a:c.helperMissing,"function"===typeof a?a.call(b,{name:"key",hash:{},data:e}):a))+"</pre>\n\t\t\t\t\t<br/>\n\t\t\t\t\t<button onClick=\"app.copySenderPublicKeyToClipboard('"+
d.escapeExpression((a=null!=(a=c.id_str||(null!=b?b.id_str:b))?a:c.helperMissing,"function"===typeof a?a.call(b,{name:"id_str",hash:{},data:e}):a))+"')\">Copy to clipboard</button>\n\t\t\t\t</div>\n\t\t\t\t<br/><br/>\n"},useData:!0})})();
(function(){var c=Handlebars.template;(Handlebars.templates=Handlebars.templates||{})["scaffold-status-good-template"]=c({compiler:[7,">= 4.0.0"],main:function(c,b,d,f,e){var a;return'\t\t\t<span>Message is <span style="color:#2BD618;font-weight:bold">good</span> to send.  You have room for <span style="font-weight:bold">'+c.escapeExpression((a=null!=(a=d.availableCharacters||(null!=b?b.availableCharacters:b))?a:d.helperMissing,"function"===typeof a?a.call(b,{name:"availableCharacters",hash:{},data:e}):
a))+"</span> more characters.</span>"},useData:!0})})();
(function(){var a=Handlebars.template;(Handlebars.templates=Handlebars.templates||{})["scaffold-status-incomplete-template"]=a({compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){return'\t\t\t<span style="color:red;font-weight:bold">NOT READY</span>\n\t\t    Still need to add a visible tweet of at least two characters to hide Seecret message inside.\n'},useData:!0})})();
(function(){var c=Handlebars.template;(Handlebars.templates=Handlebars.templates||{})["scaffold-status-spillover-template"]=c({compiler:[7,">= 4.0.0"],main:function(c,b,d,f,e){var a;return'\t\t<span style="color:red;font-weight:bold">NOT READY</span>\n\t\tYou can either reduce the message length by <span style="font-weight:bold">'+c.escapeExpression((a=null!=(a=d.spillover||(null!=b?b.spillover:b))?a:d.helperMissing,"function"===typeof a?a.call(b,{name:"spillover",hash:{},data:e}):a))+'</span> \n\t\t<span id="addAnotherScaffoldButton"> or <button onClick="app.newVisibleMessageField()" class="addMoreButton">add another visible tweet</button></span>.\n'},
useData:!0})})();
(function(){var f=Handlebars.template;(Handlebars.templates=Handlebars.templates||{})["scaffold-template"]=f({compiler:[7,">= 4.0.0"],main:function(d,b,c,f,e){var a;return'\t\t\t<div id="scaffoldingEntryContainer'+d.escapeExpression((a=null!=(a=c.scaffoldId||(null!=b?b.scaffoldId:b))?a:c.helperMissing,"function"===typeof a?a.call(b,{name:"scaffoldId",hash:{},data:e}):a))+'"><span>Tweet '+d.escapeExpression((a=null!=(a=c.scaffoldCount||(null!=b?b.scaffoldCount:b))?a:c.helperMissing,"function"===typeof a?
a.call(b,{name:"scaffoldCount",hash:{},data:e}):a))+':</span>  <input type="text" value="'+d.escapeExpression((a=null!=(a=c.val||(null!=b?b.val:b))?a:c.helperMissing,"function"===typeof a?a.call(b,{name:"val",hash:{},data:e}):a))+'" onKeyUp="app.processScaffoldField('+d.escapeExpression((a=null!=(a=c.scaffoldId||(null!=b?b.scaffoldId:b))?a:c.helperMissing,"function"===typeof a?a.call(b,{name:"scaffoldId",hash:{},data:e}):a))+');app.processScaffolding()" id="scaffold'+d.escapeExpression((a=null!=(a=
c.scaffoldId||(null!=b?b.scaffoldId:b))?a:c.helperMissing,"function"===typeof a?a.call(b,{name:"scaffoldId",hash:{},data:e}):a))+'" /><div id="scaffoldRemover'+d.escapeExpression((a=null!=(a=c.scaffoldId||(null!=b?b.scaffoldId:b))?a:c.helperMissing,"function"===typeof a?a.call(b,{name:"scaffoldId",hash:{},data:e}):a))+'" onClick="app.removeScaffold('+d.escapeExpression((a=null!=(a=c.scaffoldId||(null!=b?b.scaffoldId:b))?a:c.helperMissing,"function"===typeof a?a.call(b,{name:"scaffoldId",hash:{},data:e}):
a))+')" title="Remove" class="removeButton"><i class="fa fa-trash-o"></i></div></div>\n'},useData:!0})})();
var app={TIMELINE_VIEW:"timeline",SETTINGS_VIEW:"settings",DIRECT_MESSAGES_VIEW:"privateMessages",PUBLIC_KEYS_VIEW:"publicKeys",STATUS_MESSAGE_VIEW:"statusMessage",ABOUT_VIEW:"about",HASHES_VIEW:"hashes",oauthResult:null,doScroll:!0,activeUser:{},refreshActiveUserTotal:function(){if(app.activeUser){var a=app.getObject("privateKey-"+app.activeUser.user.id_str);app.activeUser.privateKey=a;a=app.getObject("publicKey-"+app.activeUser.user.id_str);app.activeUser.publicKey=a;a=app.getObject("publicKeys-"+
app.activeUser.user.id_str);app.activeUser.publicKeys=a;a=app.getObject("keyOptions-"+app.activeUser.user.id_str);app.activeUser.keyOptions=a;a=app.getObject("sentPublicKeys-"+app.activeUser.user.id_str);app.activeUser.sentPublicKeys=a;app.refreshActiveUserDMSenders()}},refreshActiveUserDMSenders:function(a){a=app.getObject("dmSenders-"+app.activeUser.user.id_str);app.activeUser.dmSenders=a},initialize:function(){location.hash&&history.pushState("",document.title,window.location.pathname+window.location.search);
app.unauthenticatedUI();app.initOauth()},loginToTwitter:function(){OAuth.popup("twitter",{options:{cache:!0}}).done(function(a){console.log("oauth done!");app.oauthResult=a;app.saveOauth();app.updateOauthUserInfo()}).fail(function(a){console.log(JSON.stringify(a));alert("Error logging into Twitter.  Please try again");app.unauthenticatedUI()})},logoutFromTwitter:function(){app.oauthResult=null;app.lastProcessedStatusId=null;app.lastProcessedMessageId=null;app.dmMaxId=null;app.postedDirectMessageId=
null;app.directMessagesToPost=null;app.directMessageCount=null;app.maxId=null;app.activeUser={};app.lastId=null;app.password=null;app.postCompleteCount=0;app.postCompleteTarget=0;app.deleteSavedItem("user");localStorage.removeItem("oauth_token");localStorage.removeItem("oauth_token_secret");app.hideAllViews();app.unauthenticatedUI()},initOauth:function(){null==app.oauthResult&&OAuth.initialize(oauthio_key.key);app.loadOauth();app.updateOauthUserInfo()},saveOauth:function(){localStorage.setItem("oauth_token",
app.oauthResult.oauth_token);localStorage.setItem("oauth_token_secret",app.oauthResult.oauth_token_secret)},loadOauth:function(){var a=localStorage.getItem("oauth_token"),b=localStorage.getItem("oauth_token_secret");if(null==a||null==b)return null;app.oauthResult=OAuth.create("twitter",{oauth_token:a,oauth_token_secret:b})},updateOathUserInfoComplete:function(a){null!=app.activeUser&&null!=app.activeUser.user&&null!=app.activeUser.user.id_str&&null==app.activeUser.privateKey?(app.hideAllViews(),$("#"+
app.STATUS_MESSAGE_VIEW).show(),app.generatePrivateKeyPair(app.generatePassword(),!0,function(){app.updateUIBasedUponOauthResult()})):app.updateUIBasedUponOauthResult()},updateOauthUserInfo:function(){null!=app.oauthResult?app.oauthResult.me().done(function(a){app.activeUser.user=a.raw;app.refreshActiveUserTotal();app.updateOathUserInfoComplete(a)}).fail(function(a){alert("There was an error logging you into Twitter.  Please reload the page and try again.")}):app.updateOathUserInfoComplete()},updateUIBasedUponOauthResult:function(){null!=
app.oauthResult?(app.authenticatedUI(),app.maxId=null,app.updateHomeTimeline()):app.unauthenticatedUI()},dmMaxId:null,getDirectMessages:function(a){app.updatingDirectMessages=!0;$("#directMessagesActionsContainer").empty();$("#directMessagesBreadCrumbContainer").empty();$("#friendName").empty();a||($("#directMessages").empty(),app.dmMaxId=null);var b={count:200,full_text:!0};app.dmMaxId&&a&&(b.max_id=app.dmMaxId);app.overlay();app.oauthResult.get("1.1/direct_messages.json",{data:b}).done(function(a){0<
a.length?(app.processDirectMessagesResponse(a),app.updateDirectMesssagesBreadcrumbs(null)):(app.hideOverlays(),$("#directMessages").html("No direct messages."))}).fail(function(a){app.hideOverlays()})},updateDirectMessagesUI:function(a){app.hideOverlays();$("#getMessagesButton2").remove();$("#directMessages").append(Handlebars.getTemplate("direct-messages-template")(a));$("#olderDirectMessagesButtonContainer").show();app.updatingDirectMessages=!1},publicKeyStartRegex:/^\s*-----BEGIN PGP PUBLIC KEY BLOCK-----\s/,
publicKeyEndRegex:/\s-----END PGP PUBLIC KEY BLOCK-----\s*$/,pgpMessageStartRegex:/^\s*-----BEGIN PGP MESSAGE-----/,pgpMessageEndRegex:/\s-----END PGP MESSAGE-----\s*$/,isPublicKey:function(a){return app.publicKeyStartRegex.test(a)&&app.publicKeyEndRegex.test(a)},isPGPMessage:function(a){return app.pgpMessageStartRegex.test(a)&&app.pgpMessageEndRegex.test(a)},timelineContainsKeys:function(a){for(var b in a)if(app.isPublicKey(a[b].seecret))return!0;return!1},timelineContainsEncryptedMessages:function(a){for(var b in a)if(app.isPGPMessage(a[b].seecret))return!0;
return!1},getPublicKeyMessagesFromDMList:function(a){var b=[],c;for(c in a)app.isPublicKey(a[c].seecret)&&b.push(a[c]);return b},savePublicKeys:function(a){var b=app.activeUser.publicKeys;null==b&&(b={});var c={},d;for(d in a)a[d].sender.id_str!=app.activeUser.user.id&&(c[a[d].sender.id_str]||(c[a[d].sender.id_str]={key:a[d].seecret,screen_name:a[d].sender.screen_name,id_str:a[d].sender.id_str,receiveDate:a[d].created_at}));for(var e in c)b[e]=c[e];app.saveObject("publicKeys-"+app.activeUser.user.id_str,
b);app.activeUser.publicKeys=b},processDirectMessagesResponse:function(a){1==a.length&&a[0].id_str==app.dmMaxId?($("#directMessages").append(Handlebars.getTemplate("no-more-direct-messages-template")()),app.hideOverlays(),app.updatingDirectMessages=!1):0==a.length?($("#directMessages").append(Handlebars.getTemplate("no-seecrets-in-direct-messages-template")()),app.hideOverlays(),app.updatingDirectMessages=!1):(a=app.processDirectMessages(a,app.getUniqueDMSenders),app.timelineContainsKeys(a)&&app.savePublicKeys(app.getPublicKeyMessagesFromDMList(a)),
app.timelineContainsEncryptedMessages(a)?(app.markEncryptedDirectMessages(a),app.decryptDirectMessages(a)):app.updateDirectMessagesUI(a))},markEncryptedDirectMessages:function(a){for(var b in a)this.isPGPMessage(a[b].seecret)&&(a[b].encrypted=!0,a[b].decrypted=!1)},sendPublicKeyMessages:function(a,b){app.postDirectMessages(a,function(){app.trackSentPublicKeys(b)})},trackSentPublicKeys:function(a){var b=app.activeUser.sentPublicKeys;null==b&&(b={});for(var c in a)b[c]=new Date;app.activeUser.sentPublicKeys=
b;app.saveObject("sentPublicKeys-"+app.activeUser.user.id_str,b)},passphrase:null,decryptDirectMessages:function(a){var b=openpgp.key.readArmored(app.activeUser.privateKey.armored).keys[0];if(app.decryptPrivateKey(b))app.verifyMessagesDecrypted(a,b);else{alert("Could not verify your passphrase.  Showing messages undecrypted.");for(var c in a)a[c].encrypted&&(a[c].text+=" (could not decrypt)");app.updateDirectMessagesUI(a)}},verifyMessagesDecrypted:function(a,b){var c=null,d;for(d in a)if(a[d].encrypted&&
0==a[d].decrypted){c=d;break}var e=app.activeUser.user;if(null!=c)if(a[c].sender.id_str==e.id)a[c].decrypted=!0,app.verifyMessagesDecrypted(a,b);else{a[c].decrypted=!0;a[c].decryptionSuccessful=!1;a[c].originaltext=a[c].text;try{var f=openpgp.message.readArmored(a[c].seecret),g={privateKey:b,message:f};if(app.activeUser.publicKeys&&app.activeUser.publicKeys[a[c].sender.id_str]){var l=openpgp.key.readArmored(app.activeUser.publicKeys[a[c].sender.id_str].key);g.publicKeys=l.keys}try{openpgp.decrypt(g).then(function(b){a[d].decryptionSuccessful=
!0;a[d].seecret=b.data;b.signatures&&0<b.signatures.length&&b.signatures[0].valid&&(a[d].signed=!0);app.verifyMessagesDecrypted(a,g.privateKey)},function(b){a[d].text=app.generateUndecryptedMessageContent(a[d]);app.verifyMessagesDecrypted(a,g.privateKey)})}catch(k){console.log("try/catch error decrypting: "+JSON.stringify(k)),a[d].text=app.generateUndecryptedMessageContent(a[d]),app.verifyMessagesDecrypted(a,b)}}catch(k){console.log("major try/catch error decrypting: "+JSON.stringify(k)),a[d].text=
app.generateUndecryptedMessageContent(a[d]),app.verifyMessagesDecrypted(a,b)}}else{(c=app.activeUser.dmSenders)||(c={});for(var h in a)a[h].encrypted&&a[h].sender.id_str!=app.activeUser.id&&(c[a[h].sender.id_str]=!0);app.saveObject("dmSenders-"+app.activeUser.user.id_str,c);app.refreshActiveUserDMSenders();app.updateDirectMessagesUI(a)}},undecryptedMessageContentHandler:null,generateUndecryptedMessageContent:function(a){return Handlebars.getTemplate("undecrypted-message-content-template")(a)},showPublicKeyManager:function(a,
b){app.doScroll=!1;var c={};c.receiver_name=b;c.receiver_id=a;$("#directMessagesActionsContainer").html(Handlebars.getTemplate("public-key-template")(c))},showWaitingForPublicKeyView:function(a,b){app.doScroll=!1;var c={};c.receiver_name=b;c.receiver_id=a;c.invite_date=moment(app.activeUser.sentPublicKeys[a]).format("MMMM Do YYYY, h:mm:ss a");$("#directMessagesActionsContainer").html(Handlebars.getTemplate("public-key-pending-template")(c))},showDirectMessageForm:function(a,b){app.doScroll=!1;var c=
{receiverId:a,receiverName:b};$("#directMessagesActionsContainer").html(Handlebars.getTemplate("direct-message-template")(c));app.doScroll=!1},makeKeyOptionsForUser:function(a){var b=app.generatePassword(),c=1024;openpgp.util.getWebCryptoAll()&&(c=2048);return{numBits:c,userIds:[{name:a.name,email:a.screen_name+"@seecretApp.seecret"}],passphrase:b}},generatePassword:function(){for(var a="",b=0;50>b;b++)a+=app.getValidPasswordCharacter();return a},getValidPasswordCharacter:function(){for(;;){var a=
Math.floor(206*Math.random())+48;if(!(173==a||92==a||58<=a&&64>=a||127<=a&&160>=a))return String.fromCharCode(a)}},validateNewPrivateKey:function(a){if(1>$("#"+a).val().length)return $("#"+a+"Error").html("You must have a passphrase for your key of at least one character"),!1;$("#"+a+"Error").html("");if(confirm("Are you sure?")){var b=$("#"+a).val(),c=1==document.getElementById(a+"Cache").checked;app.hideAllViews();$("#"+app.STATUS_MESSAGE_VIEW).show();app.generatePrivateKeyPair(b,c,function(){$("#"+
a).val("");confirm("Send your new key to the contacts who have the old one?")&&app.resendPublicKeys();$("#directMessagesActionsContainer").empty();app.renderPrivateKeySettings();app.setView(app.SETTINGS_VIEW)})}},resendPublicKeys:function(){var a=app.activeUser.sentPublicKeys,b=app.activeUser.dmSenders;if(null!=a||null!=b){var c=[],d={},e;for(e in a)d[e]=!0;for(e in b)d[e]=!0;var a=0,f;for(f in d){a++;var b=app.generatePublicKeyMessages(f),g;for(g in b)c.push({receiverId:f,text:b[g]})}0<c.length&&
app.sendPublicKeyMessages(c,d)}},generatePrivateKeyPair:function(a,b,c){var d=app.activeUser.user,e=app.makeKeyOptionsForUser(d);e.passphrase=a;d.id_str||(e.userId=d.id_str);null!=d&&(a=new Date,console.log("start generating key pair : "+a.getSeconds()+":"+a.getMilliseconds()),openpgp.config.debug=!0,openpgp.generateKey(e).then(function(a){var d=new Date;console.log("done generating key pair : "+d.getSeconds()+":"+d.getMilliseconds());app.generatePrivateKeyPairSuccess(a,e,b,c)}).catch(function(a){console.log("Caught an error generatinga key pair");
console.log(JSON.stringify(a))}))},generatePrivateKeyPairSuccess:function(a,b,c,d){c||delete b.passphrase;c=app.activeUser.user;var e=new Date,f={};f.armored=a.privateKeyArmored;f.dateCreated=e;var g={};g.armored=a.publicKeyArmored;g.dateCreated=e;app.saveObject("keyOptions-"+c.id_str,b);app.saveObject("privateKey-"+c.id_str,f);app.saveObject("publicKey-"+c.id_str,g);app.checkDirectMessageStatus();app.refreshActiveUserTotal();d()},setDirectMessageReceiver:function(a,b){$("#selectedReceiverId").val(a);
$("#selectedReceiverName").val(b);var c={};c.name=b;c.id_str=a;var d=app.activeUser.publicKeys,e;for(e in d)d[e].id_str==a&&(c.publicKey=d[e],c.publicKey.displayDate=(new moment(c.publicKey.receiveDate)).format("MMMM Do YYYY, h:mm:ss a"));$("#friendName").html(Handlebars.getTemplate("direct-message-friend-name")(c));app.checkDirectMessageStatus();$(".dmMessageDiv").hide();$(".dm_"+a).fadeIn()},updateDirectMesssagesBreadcrumbs:function(a){$("#directMessagesBreadCrumbContainer").html(Handlebars.getTemplate("direct-message-breadcrumb-template")(a))},
initiateDirectMessages:function(a,b){var c=app.generatePublicKeyMessages(a),d=[],e;for(e in c)d.push({receiverId:a,text:c[e]});b||d.push({text:app.joinMessage,receiverId:a});app.postDirectMessages(d,function(){var b={};b[a]=!0;app.trackSentPublicKeys(b);app.checkDirectMessageStatus()})},joinMessage:"I'm using Seecret to send encrypted direct messages over Twitter. Try it with me! Just go to https://www.seecret.net",sendingDirectMessage:!1,prepareDirectMessage:function(a){if(app.sendingDirectMessage)alert("already sending direct message!");
else{var b=$("#directMessage").val();0!=b.length&&(app.sendingDirectMessage=!0,app.overlay(),app.encryptDirectMessage(b,a))}},decryptPrivateKey:function(a){var b=app.activeUser.keyOptions,c=null;app.passphrase&&(c=app.passphrase);b.passphrase&&(c=b.passphrase);b.passphrase||null!=app.passphrase||(app.passphrase=c=prompt("Enter your passphrase"));if(a.decrypt(c))return!0;app.passphrase=null;return!1},encryptDirectMessage:function(a,b){var c=app.activeUser.publicKeys,d=null,e;for(e in c)e==b&&(d=c[e].key);
d?(c=openpgp.key.readArmored(d).keys,c={publicKeys:c,data:a},app.activeUser.privateKey&&(d=openpgp.key.readArmored(app.activeUser.privateKey.armored),app.decryptPrivateKey(d.keys[0])&&(c.privateKeys=d.keys)),openpgp.encrypt(c).then(function(a){a=app.hideAndCompress(a.data);app.seecret_engine.config.RANDOM_COVERTEXTS=!0;app.seecret_engine.config.MAX_CHAIN_SEGMENT_LENGTH=1E4;a=app.seecret_engine.chainify(a,covertexts);app.seecret_engine.config.RANDOM_COVERTEXTS=!1;app.seecret_engine.config.MAX_CHAIN_SEGMENT_LENGTH=
140;a.reverse();for(var c in a)a[c]={receiverId:b,text:a[c]};app.postDirectMessages(a,function(){});$("#directMessage").val("")}).catch(function(a){console.log("Error generating the messages:"+JSON.stringify(a));app.hideOverlays();app.sendingDirectMessage=!1})):(app.sendingDirectMessage=!1,app.hideOverlays(),alert("You do not have that users public key."))},postedDirectMessageId:null,directMessagesToPost:null,directMessageCount:0,postDirectMessages:function(a,b){app.directMessagesToPost=a;app.directMessageCount=
0;app.checkDirectMessages(b)},checkDirectMessages:function(a){if(app.directMessagesToPost&&app.directMessageCount<app.directMessagesToPost.length){var b=app.directMessagesToPost[app.directMessageCount].text,c=app.directMessagesToPost[app.directMessageCount].receiverId;app.directMessageCount++;app.postDirectMessage(b,c,a)}else app.hideOverlays(),alert("Sent!"),app.sendingDirectMessage=!1,a&&a()},postDirectMessage:function(a,b,c){app.oauthResult.post("1.1/direct_messages/new.json",{data:{text:a,user_id:b}}).done(function(a){app.checkDirectMessages(c)}).fail(function(a){})},
generatePublicKeyMessages:function(a){a=app.activeUser.publicKey;if(null!=a)return a=app.hideAndCompress(a.armored),app.seecret_engine.config.MAX_CHAIN_SEGMENT_LENGTH=1E4,chain=app.seecret_engine.chainify(a,["Here's my Seecret key","Now we can start using Seecret to send encrypted messages on Twitter."]),chain.reverse(),app.seecret_engine.config.MAX_CHAIN_SEGMENT_LENGTH=140,chain},promptDeleteKey:function(){confirm("Are you sure?")&&(app.deleteSavedItem("privateKey-"+app.activeUser.user.id_str),app.deleteSavedItem("publicKey-"+
app.activeUser.user.id_str),app.deleteSavedItem("keyOptions-"+app.activeUser.user.id_str),app.activeUser.privateKey=null,app.activeUser.publicKey=null,app.activeUser.keyOptions=null,app.renderPrivateKeySettings(),app.setView(app.SETTINGS_VIEW))},checkDirectMessageStatus:function(){app.doScroll=!1;var a=$("#selectedReceiverId").val(),b=$("#selectedReceiverName").val();if(a)if(null==app.activeUser.privateKey)app.showPrivateKeyManager();else{var c=app.activeUser.publicKeys,d=app.activeUser.sentPublicKeys;
null==d||null==d[a]||null!=c&&c[a]?null==c||null!=c&&!c[a]?app.showPublicKeyManager(a,b):app.showDirectMessageForm(a,b):app.showWaitingForPublicKeyView(a,b);app.doScroll=!0}},maxId:null,lastId:null,homeTimeline:!0,userTimelineId:null,updateUserTimeline:function(a,b){b&&(app.maxId=null);app.userTimelineId=a;app.homeTimeline=!1;app.updatingTimeline=!0;var c={data:{}};c.data.count=200;c.data.screen_name=a;c.data.include_rts=!1;null!=app.maxId?c.data.max_id=app.maxId:$("#status-list").empty();app.hideOverlays();
app.getUserTimeline(c,app.handleTimelineResponse)},getTimeline:function(a,b){app.oauthResult.get("1.1/statuses/home_timeline.json",a).done(function(a){b(a);app.hideOverlays()}).fail(app.handleGetTimelineError)},getUserTimeline:function(a,b){$("#twitterUser").val("");app.oauthResult.get("1.1/statuses/user_timeline.json",a).done(function(a){b(a);app.hideOverlays()}).fail(app.handleGetTimelineError)},handleTimelineResponse:function(a){0<a.length?1==a.length&&a[0].id_str==app.maxId?$("#status-list").append(Handlebars.getTemplate("no-more-timeline-message-template")()):
app.processTimelineResponse(a):app.handleEmptyTimelineResponse(a)},handleGetTimelineError:function(a){429==a.status?alert("Twitter rate limit exceeded.  You must wait 15 minutes to make more requests from this app."):404==a.status?alert("Twitter says that screen name does not exist."):alert("There was an error retrieving the timeline.");console.log("Error:"+JSON.stringify(a));app.hideOverlays()},handleEmptyTimelineResponse:function(a){app.hideOverlays()},processTimelineResponse:function(a){app.addFollowerTagToTweets(a,
app.processTimelineWithFollowerInfo)},addFollowerTagToTweets:function(a,b){var c={},d;for(d in a)c[a[d].user.id_str]=a[d].user.id_str;d=[];for(var e in c)d.push(e);c={data:{}};c.data.user_id=d.join();app.oauthResult.get("1.1/friendships/lookup.json",c).done(function(c){var d={},e;for(e in c)0<=c[e].connections.indexOf("followed_by")&&(d[c[e].id_str]=!0);for(var h in a)d[a[h].user.id_str]&&(a[h].follower=!0);b(a)}).fail(function(c){b(a)})},unhideAndDecompressTimelineSeecrets:function(a,b){var c=[],
d;for(d in a)if(a[d].seecret_envelope){var e=a[d].seecret_envelope,f=app.seecret_engine.getSeecretFromEnvelope(e),e=app.seecret_engine.getContentTypeFromEnvelope(e),f=app.seecret_engine.unhide(f,e);if(e==app.seecret_engine.config.CONTENT_TYPES.NUMBERS_ARRAY)try{f=seecret_compression.decompress(f),a[d].seecret=f}catch(g){console.log("error decompressing a seecret message: "+JSON.stringify(g)),a[d].seecret="Could not decompress the Seecret",a[d].seecret_error=g}else a[d].seecret=f;c.push(a[d])}else b&&
!app.seecret_engine.hasSeecretContent(a[d].text)&&c.push(a[d]);return c},getEarliestIncompleteChainStartId:function(a,b){for(var c in b)app.getFirstIncompleteChainStart(a,b[c])},getEarliestIncompleteDMChainStartId:function(a,b){for(var c in b)app.getFirstIncompleteDMChainStart(a,b[c])},getFirstIncompleteChainStart:function(a,b){var c=0,d;for(d in a)a[d].user.id_str==b&&app.seecret_engine.hasSeecretContent(a[d].text)&&(app.seecret_engine.isEnvelopeStart(a[d].text)&&(c=d),app.seecret_engine.isEnvelopeEnd(a[d].text)&&
(c=0));return c},getFirstIncompleteDMChainStart:function(a,b){var c=0,d;for(d in a)a[d].sender.id_str==b&&app.seecret_engine.hasSeecretContent(a[d].text)&&(app.seecret_engine.isEnvelopeStart(a[d].text)&&(c=d),app.seecret_engine.isEnvelopeEnd(a[d].text)&&(c=0));return c},processDirectMessages:function(a,b){var c=b(a),d=app.getSeecretMessageIndexesBySender(a,c);a=app.dechainifyDirectMessages(a,d);app.dmMaxId=app.lastProcessedStatusId=a[a.length-1].id_str;c=app.getEarliestIncompleteDMChainStartId(a,
c);0<c&&(app.dmMaxId=a[c].id_str);a=app.unhideAndDecompressTimelineSeecrets(a,!0);return a=app.imgUrlsToHttps(a,"sender")},processTimelineMessages:function(a,b){var c=b(a),d=app.getMessageIndexes(a,c,app.tweetSenderGetter);a=app.dechainifyTweets(a,d);app.maxId=app.lastProcessedStatusId=a[a.length-1].id_str;c=app.getEarliestIncompleteChainStartId(a,c);0<c&&(app.maxId=a[c].id_str);a=app.unhideAndDecompressTimelineSeecrets(a,!document.getElementById("showOnlySeecrets").checked);return a=app.imgUrlsToHttps(a,
"user")},httpsReplaceRegex:/^http:/,imgUrlsToHttps:function(a,b){for(var c in a)a[c][b]&&a[c][b].profile_image_url&&(a[c][b].profile_image_url=a[c][b].profile_image_url.replace(app.httpsReplaceRegex,"https:"));return a},processTimelineWithFollowerInfo:function(a){a=app.processTimelineMessages(a,app.getUniqueTweeters);0<a.length?$("#status-list").append(Handlebars.getTemplate("status-template")(a)):$("#showOnlySeecrets")&&$("#status-list").append(Handlebars.getTemplate("no-seecrets-in-timeline-segment-template")());
$(".basicTweet").fadeIn();app.updatingTimeline=!1;app.userTimelineId?app.renderUserTimelineHeader(app.userTimelineId):$("#timelineName").html("")},renderUserTimelineHeader:function(a){$("#timelineName").html("for "+a+" &nbsp;&nbsp;&nbsp;<a href='javascript:app.initTimeline();app.updateHomeTimeline()'>Back to my timeline</a>")},dechainifyTweets:function(a,b){for(var c in b)if(0<b[c].length){var d=0,e;for(e in b[c]){var f=app.seecret_engine.dechainifyWithCovertexts(a,{chainSegmentMatcher:function(a){return a&&
a.text&&"string"==typeof a.text&&a.user&&a.user.id_str==c?a:null},chainSegmentContentFinder:this.chainSegmentContentFinder,ordinal:d});f&&""!=f.seecret&&(a[b[c][e]].seecret_envelope=f.seecret,a[b[c][e]].covertexts=f.covertexts);d++}}return a},dechainifyDirectMessages:function(a,b){for(var c in b)if(0<b[c].length){var d=0,e;for(e in b[c]){var f=app.seecret_engine.dechainifyWithCovertexts(a,{chainSegmentMatcher:function(a){return a&&a.text&&"string"==typeof a.text&&a.sender&&a.sender.id_str==c?a:null},
chainSegmentContentFinder:this.chainSegmentContentFinder,ordinal:d});f&&""!=f.seecret&&(a[b[c][e]].seecret_envelope=f.seecret,a[b[c][e]].covertexts=f.covertexts);d++}}return a},chainSegmentContentFinder:function(a){return a.text},tweetSenderGetter:function(a){return a.user?a.user.id_str:null},dmSenderGetter:function(a){return a.user?a.user.id_str:null},getMessageIndexes:function(a,b,c){var d={},e;for(e in b)d[e]=app.seecret_engine.getOrdinalIndexes(a,{chainSegmentMatcher:function(a){return c(a)==
b[e]?a:null},chainSegmentContentFinder:this.chainSegmentContentFinder});return d},getSeecretMessageIndexesByUser:function(a,b){var c={},d;for(d in b)c[d]=app.seecret_engine.getOrdinalIndexes(a,{chainSegmentMatcher:function(a){return a&&a.text&&"string"==typeof a.text&&a.user&&a.user.id_str==b[d]?a:null},chainSegmentContentFinder:this.chainSegmentContentFinder});return c},getSeecretMessageIndexesBySender:function(a,b){var c={},d;for(d in b)c[d]=app.seecret_engine.getOrdinalIndexes(a,{chainSegmentMatcher:function(a){return a&&
a.text&&"string"==typeof a.text&&a.sender&&a.sender.id_str==b[d]?a:null},chainSegmentContentFinder:this.chainSegmentContentFinder});return c},getUniqueTweeters:function(a){return app.getUniqueInstancesFromList(a,app.getTweeterId)},getUniqueDMSenders:function(a){return app.getUniqueInstancesFromList(a,app.getDMSenderId)},getTweeterId:function(a){return a.user.id_str},getDMSenderId:function(a){return a.sender.id_str},getUniqueInstancesFromList:function(a,b){var c={},d;for(d in a){var e=b(a[d]);c[e]=
e}return c},generateTimelinePostVals:function(){var a={data:{}};a.data.count=200;null!=app.maxId&&(a.data.max_id=app.maxId);return a},initTimeline:function(){app.maxId=null;app.homeTimeline=!0;app.userTimelineId=null;app.updateHomeTimeline()},updateHomeTimeline:function(a){$("#twitterUser").val("");a&&(app.maxId=null);app.homeTimeline=!0;$("#timelineName").empty();app.updatingTimeline=!0;a=app.generateTimelinePostVals();a.data.max_id||($("#status-list").empty(),app.lastProcessedStatusId=null);app.overlay();
app.getTimeline(a,app.handleTimelineResponse)},postCompleteCount:0,postCompleteTarget:0,prepareUpdateMessage:function(){var a=$("#textarea-statusUpdate").val(),a=app.hideAndCompress(a),b=null;app.useAutogeneratedScaffolding()||(b=app.getScaffolds());a=app.seecret_engine.chainify(a,b);a.reverse();return a},updateStatus:function(){var a=this.prepareUpdateMessage();this.postChain(a)},postChain:function(a){this.currentMessageChain=a;this.chainCount=0;this.postChainItem()},postChainItem:function(){this.chainCount<
this.currentMessageChain.length?app.oauthResult.post("1.1/statuses/update.json",{data:{status:this.currentMessageChain[this.chainCount++]}}).done(function(a){setTimeout(function(){app.postChainItem()},50)}).fail(function(a){}):($("#status-list").empty(),$("#scaffoldingWarningContainer").empty(),$("#scaffoldingStatus").empty(),$("#textarea-statusUpdate").val(""),$("#textarea-statusUpdate").val(""),$("#scaffoldsContainer").html(Handlebars.getTemplate("scaffolds-template")()),$("#scaffoldingContainer > div > div > input").val(""),
app.maxId=null,this.currentMessageChain=[],this.chainCount=0,app.updateHomeTimeline(),app.setView(app.TIMELINE_VIEW))},authenticatedUI:function(){app.authenticatedHeader();app.authenticatedMenu();app.setView(app.TIMELINE_VIEW)},unauthenticatedUI:function(){$("#status-list").empty();$("#userLabel").empty();$("#userProfileImg").hide();$("#directMessages").empty();$("#publicKeys").empty();$("#directMessagesActionsContainer").val("");$("#textarea-statusUpdate").val("");$("#importPrivateKeyText").val("");
$("#importPrivateKeyPassphrase").val("");$("#privateKeyTextarea").val("");$("#privateKeyPassphrase").val("");$("#privateKeyCopyarea").empty();$("#publicKeysDisplayArea").empty();app.unauthenticatedHeader();$("#privateMessageButton").hide();$("#timelineButton").hide();app.unauthenticatedMenu();app.setView(app.ABOUT_VIEW)},authenticatedMenu:function(){$("#privateMessageButton").show();$("#timelineButton").show();$("#settingsButton").show();$("#logoutButton").show();$("#hashesButton").show();$("#publicKeysButton").show();
$("#aboutButton").show()},unauthenticatedMenu:function(){$("#privateMessageButton").hide();$("#timelineButton").hide();$("#settingsButton").hide();$("#logoutButton").hide();$("#publicKeysButton").hide()},authenticatedHeader:function(){app.activeUser&&app.activeUser.user&&(app.activeUser.user.profile_image_url=app.activeUser.user.profile_image_url.replace(app.httpsReplaceRegex,"https:"),$("#loginContainer").html(Handlebars.getTemplate("authenticated-header-template")(app.activeUser.user)))},unauthenticatedHeader:function(){$("#loginContainer").html(Handlebars.getTemplate("unauthenticated-header-template")())},
hideAllViews:function(){$("#timeline").hide();$("#statusMessage").hide();$("#privateMessages").hide();$("#settings").hide();$("#publicKeys").hide();$("#about").hide();$("#hashes").hide()},setMenuState:function(a){$.each($(".menuLink"),function(a,c){$(this).css("background","");$(this).css("color","")});$("#"+a).css("background","#e3e3e3");$("#"+a).css("color","#333");app.openClosePanel("close")},setView:function(a){app.doScroll=!1;app.hideAllViews();$("#"+a).fadeIn(function(){app.doScroll=!0}).css("display",
"block");app.setMenuState(a+"Button")},renderPublicKeys:function(){var a=app.activeUser.publicKeys,b=[],c=0,d;for(d in a)a[d].displayDate=moment(a[d].receiveDate).format("MMMM Do YYYY, h:mm:ss a"),b.push(a[d]),c++;0<c?(a=Handlebars.getTemplate("public-keys-template")({keys:b}),$("#publicKeysDisplayArea").html(a)):$("#publicKeysDisplayArea").html("No public keys")},copySenderPublicKeyToClipboard:function(a){var b=app.activeUser.publicKeys;b[a]&&(executeCopy(b[a].key),alert(b[a].screen_name+"'s key has been copied to your clipboard"))},
copyContentsToClipboard:function(a){executeCopy($("#"+a).html())},showPrivateKeyManager:function(){app.doScroll=!1;$("#directMessagesActionsContainer").html(Handlebars.getTemplate("private-key-template")());$("#directMessagesActionsContainer").show()},openClosePanel:function(a){"open"==a?$("#left-panel").css("left",0):$("#left-panel").css("left","-14em")},processScaffoldField:function(a){a=$("#scaffold"+a);val=a.val();for(var b=val.replace(/\s{2,}/g," ");" "==b.substr(0,1);)b=b.substr(1);b=b.substr(0,
100);b!=val&&a.val(b)},useAutogeneratedScaffolding:function(){return!1},hideAndCompress:function(a){var b=app.seecret_engine.hide(a,app.seecret_engine.config.CONTENT_TYPES.PLAIN),b=app.seecret_engine.envelope(b,app.seecret_engine.config.CONTENT_TYPES.PLAIN);a=seecret_compression.compress(a);a=app.seecret_engine.hide(a,app.seecret_engine.config.CONTENT_TYPES.NUMBERS_ARRAY);a=app.seecret_engine.envelope(a,app.seecret_engine.config.CONTENT_TYPES.NUMBERS_ARRAY);return b.length>a.length?a:b},processScaffolding:function(){var a=
$("#textarea-statusUpdate").val();if(!app.useAutogeneratedScaffolding()){var b=!1,a=app.hideAndCompress(a),c=app.getScaffolds(),d=0,e=0;if(1==c.length)if(2<=c[0].trim().length&&c[0].trim().length+a.length<app.seecret_engine.config.MAX_CHAIN_SEGMENT_LENGTH)b=!0,d=app.seecret_engine.config.MAX_CHAIN_SEGMENT_LENGTH-a.length-c[0].trim().length;else{if(2>c[0].trim().length){app.makeUpdateFormPending();return}e=app.seecret_engine.config.MAX_CHAIN_SEGMENT_LENGTH-(c[0].trim().length+a.length);e*=-1}else{var f=
scaffoldLength=0;for(each in c)2<=c[each].trim().length&&(scaffoldLength+=c[each].trim().length,f++);scaffoldLength+a.length<app.seecret_engine.config.MAX_CHAIN_SEGMENT_LENGTH*f?(b=!0,d=app.seecret_engine.config.MAX_CHAIN_SEGMENT_LENGTH*f-(scaffoldLength+a.length)):(e=app.seecret_engine.config.MAX_CHAIN_SEGMENT_LENGTH*f-(scaffoldLength+a.length),e*=-1)}b?app.makeUpdateFormReady(d):app.makeUpdateFormNotReady(e)}},newVisibleMessageField:function(){var a=app.getScaffolds();app.addScaffoldField(a.length);
app.processScaffolding()},addScaffoldField:function(a,b){var c={scaffoldId:a,val:b,scaffoldCount:a+1};$("#scaffoldsContainer").append(Handlebars.getTemplate("scaffold-template")(c))},makeUpdateFormReady:function(a){$("#submitButtonContainer").show();var b={};b.availableCharacters=a;$("#scaffoldingStatus").html(Handlebars.getTemplate("scaffold-status-good-template")(b))},makeUpdateFormNotReady:function(a){$("#submitButtonContainer").hide();var b={};b.spillover=a;$("#scaffoldingStatus").html(Handlebars.getTemplate("scaffold-status-spillover-template")(b))},
makeUpdateFormPending:function(){$("#submitButtonContainer").hide();$("#scaffoldingStatus").html(Handlebars.getTemplate("scaffold-status-incomplete-template")())},removeScaffold:function(a){var b=app.getScaffolds(),c=[],d;for(d in b)d!=a&&c.push(b[d]);app.renderScaffolds(c);app.processScaffolding()},renderScaffolds:function(a){$("#scaffoldsContainer").html("");for(var b=0,c=0;c<a.length;c++)app.addScaffoldField(b++,a[c]);$("#scaffoldRemover0").remove()},getScaffolds:function(){for(var a=[],b=document.getElementById("scaffold0");b;)a.push(b.value.trim()),
b=document.getElementById("scaffold"+a.length);return a},toggleScaffolds:function(){document.getElementById("scaffoldingOption").checked?($("#scaffoldingStatus").html(""),$("#scaffoldsContainer").html(""),$("#scaffoldingWarningContainer").hide(),$("#scaffoldingContainer").hide(),$("#submitButtonContainer").show()):($("#scaffoldingStatus").html(""),$("#scaffoldsContainer").html(""),$("#scaffoldingContainer").show(),$("#scaffoldingWarningContainer").html(""),$("#submitButtonContainer").hide(),app.addScaffoldField(0),
app.processScaffolding())},getScaffoldTotal:function(a){for(var b=0,c=0;c<a.length;c++)b+=a[c].trim().length;return b},showCopyPrivateKey:function(a){"block"==$("#privateKeyCopyarea").css("display")?($(a).html("Show"),$("#privateKeyCopyarea").hide(),$("#privateKeyCopyarea").html("")):($(a).html("Hide"),app.renderPrivateKeySettings())},toggleDeleteSettings:function(a){"block"==$("#deleteKeyForm").css("display")?($(a).html("Show"),$("#deleteKeyForm").hide()):($(a).html("Hide"),$("#deleteKeyForm").show())},
renderPrivateKeySettings:function(){var a=app.activeUser.privateKey,b=app.activeUser.publicKey,c=app.activeUser.keyOptions,d={};app.activeUser&&app.activeUser.privateKey&&(d.privateKey=a,d.privateKey.dateCreatedDisplay=(new moment(d.privateKey.dateCreated)).format("MMMM Do YYYY, h:mm:ss a"),d.publicKey=b,d.keyOptions=c);a=Handlebars.getTemplate("user-keys-template")(d);$("#privateKeyCopyarea").html(a);$("#privateKeyCopyarea").fadeIn()},showPublicKeys:function(a){"block"==$("#publicKeysDisplayArea").css("display")?
($(a).html("Show"),$("#publicKeysDisplayArea").hide()):($(a).html("Hide"),app.renderPublicKeys(),$("#publicKeysDisplayArea").fadeIn())},showImportPrivateKey:function(a){"block"==$("#importForm").css("display")?($(a).html("Show"),$("#importForm").hide()):($(a).html("Hide"),$("#importForm").show())},showGeneratePrivateKey:function(a){"block"==$("#generateForm").css("display")?($(a).html("Show"),$("#generateForm").hide()):($(a).html("Hide"),$("#generateForm").show())},saveObject:function(a,b){localStorage[a]=
JSON.stringify(b)},getObject:function(a){return app.getLocalObject(a)},getLocalObject:function(a){return localStorage[a]?JSON.parse(localStorage[a]):null},saveLocalObject:function(a,b){localStorage[a]=JSON.stringify(b)},deleteSavedItem:function(a){delete localStorage[a]},privateKeyUpdateStatus:{},importPrivateKey:function(){var a=app.activeUser.user,b=$("#importPrivateKeyText").val(),c=new Date,d=openpgp.key.readArmored(b);if(!d||!d.keys||1>d.keys.length)alert("The key is invalid");else{var e=openpgp.key.readArmored(b).keys[0],
f=$("#importPrivateKeyPassphrase").val();e.decrypt(f)?(f=$("#importPrivateKeyPassphrase").val(),$("#importPrivateKeyText").val(""),$("#importPrivateKeyPassphrase").val(""),d=app.makeKeyOptionsForUser(a),d.passphrase=f,b={armored:b,dateCreated:c},c={armored:e.toPublic().armor(),dateCreated:c},app.activeUser.privateKey=b,app.activeUser.publicKey=c,app.activeUser.keyOptions=d,app.saveObject("privateKey-"+a.id_str,b),app.saveObject("publicKey-"+a.id_str,c),app.saveObject("keyOptions-"+a.id_str,d),app.activeUser.privateKey=
b,app.activeUser.publicKey=c,app.activeUser.keyOptions=d,app.resendPublicKeys(),app.renderPrivateKeySettings(),alert("Successfully imported the private key.")):alert("Could not decrypt the key with the passphrase you entered.  Please try again")}},deleteSavedPassphrase:function(){if(confirm("Are you sure?")){var a=app.activeUser.user,b=app.activeUser.keyOptions;b.passphrase="";app.activeUser.keyOptions=b;app.saveObject("keyOptions-"+a.id_str,b)}app.renderPrivateKeySettings()},changePassphrase:function(){var a=
prompt("Enter new passphrase");if(null!=a){var b=prompt("Enter it again");null!=b&&(a==b?(alert("Changing your passphrase to "+b+"\n we urge you to delete it from this device once you've got it memorized or saved elsewhere."),app.setNewPassphraseOnPrivateKey(a)):alert("Your new passphrase did not match, please try again"))}app.renderPrivateKeySettings()},setNewPassphraseOnPrivateKey:function(a){var b=app.activeUser.user,c=app.activeUser.keyOptions,d=openpgp.key.readArmored(app.activeUser.privateKey.armored);
if(app.decryptPrivateKey(d.keys[0])){d.keys[0].primaryKey.encrypt(a);d.keys[0].subKeys&&0<d.keys[0].subKeys.length&&d.keys[0].subKeys[0]&&d.keys[0].subKeys[0].subKey.encrypt(a);var e={};e.dateCreated=new Date;e.armored=d.keys[0].armor();var f={};f.dateCreated=new Date;f.armored=d.keys[0].toPublic().armor();c.passphrase=a;app.saveObject("publicKey-"+b.id_str,f);app.saveObject("privateKey-"+b.id_str,e);app.saveObject("keyOptions-"+b.id_str,c);app.activeUser.publicKey=f;app.activeUser.privateKey=e;app.activeUser.keyOptions=
c}else alert("Old passphrase was incorrect.  Please try again");app.renderPrivateKeySettings()},overlay:function(a){a||(a="overlay");$("#"+a).css("display","block")},hideOverlays:function(){$("#overlay").css("display","none");$("#static-overlay").css("display","none")},getNameValuePairsFromArgumentList:function(a,b,c){var d=[];a=a.split(b);for(var e in a)b=a[e].split(c),d.push({name:b[0],value:b[1]});return d},isIOS:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}};
$(document).ready(function(){openpgp.config.show_comment=!1;openpgp.config.show_version=!1;app.seecret_engine=new SEECRET_ENGINE;$(window).scroll(function(){if(app.doScroll){var a=$(window).scrollTop(),b=$(window).height(),c=$(document).height();a+b==c&&("block"!=document.getElementById("timeline").style.display||app.updatingTimeline?"block"!=document.getElementById("privateMessages").style.display||app.updatingDirectMessages||app.getDirectMessages(!0):app.homeTimeline?app.updateHomeTimeline():app.updateUserTimeline(app.userTimelineId))}});
$("#textarea-statusUpdate").keyup(function(a){app.processScaffolding()});$("#textarea-statusUpdate").change(function(a){app.processScaffolding()});$("#scaffoldingEntryContainer0").keyup(function(a){app.processScaffoldField(0);app.processScaffolding()});$("#updateStatusForm").submit(function(a){a.preventDefault();app.updateStatus()});$.ajax({url:"hashes.txt"}).done(function(a){a=app.getNameValuePairsFromArgumentList(a,/\n/,"=");if(null==a)$("#hashesContent").html(Handlebars.getTemplate("hashes-not-found-template")()),
app.setView(app.HASHES_VIEW),app.unauthenticatedMenu();else{var b=/^SHA1\((.*)\)$/,c=[],d;for(d in a)if(b.test(a[d].name)){var e=b.exec(a[d].name);a[d].name=e[1].replace("../","");c.push(a[d])}$("#hashesContent").html(Handlebars.getTemplate("hashes-template")(c));app.initialize()}}).fail(function(a){$("#hashesContent").html(Handlebars.getTemplate("hashes-not-found-template")());app.setView(app.HASHES_VIEW);app.unauthenticatedMenu();$("#aboutButton").hide()})});
Handlebars.registerHelper("tweetShortDate",function(a){a=moment(a,"dd MMM DD HH:mm:ss ZZ YYYY","en").twitter();a.match(/\//)||(a+=" ago");return a});Handlebars.getTemplate=function(a){void 0!==Handlebars.templates&&void 0!==Handlebars.templates[a]||$.ajax({url:a+".hbs",success:function(b){void 0===Handlebars.templates&&(Handlebars.templates={});Handlebars.templates[a]=Handlebars.compile(b)},async:!1});return Handlebars.templates[a]};
function executeCopy(a){var b=document.createElement("div");b.contentEditable=!0;document.body.appendChild(b);b.innerHTML=a.replace(/\n/g,"<br/>");b.unselectable="off";b.focus();document.execCommand("SelectAll");document.execCommand("Copy",!1,null);document.body.removeChild(b)};
var seecret_compression={SMAZ_TYPE:0,SHOCO_TYPE:1,isAscii:function(a){return/^[\x00-\x7F]*$/.test(a)},compress:function(a){var b=seecret_compression.smazify(a);a=seecret_compression.shocotize(a);return b.length>=a.length?a:b},smazify:function(a){a=smaz.compress(a);a=seecret_compression.convertIndexedObectToArray(a);a.unshift(seecret_compression.SMAZ_TYPE);return a},shocotize:function(a){a=shoco.compress(a);a=seecret_compression.convertIndexedObectToArray(a);a.unshift(seecret_compression.SHOCO_TYPE);
return a},toUint8Array:function(a){var b=new ArrayBuffer(a.length),b=new Uint8Array(b);for(each in a)b[each]=a[each];return b},decompress:function(a){if(!seecret_compression.validateCompressedArray(a))throw seecret_compression.INVALID_COMPRESSED_ARRAY_VALUES_ERROR;if(a[0]==seecret_compression.SMAZ_TYPE)return seecret_compression.desmazify(a.slice(1));if(a[0]==seecret_compression.SHOCO_TYPE)return seecret_compression.deshocotize(a.slice(1))},desmazify:function(a){return smaz.decompress(a)},deshocotize:function(a){a=
seecret_compression.toUint8Array(a);return shoco.decompress(a)},validateCompressedArray:function(a){for(var b=0;b<a.length;b++)if(!Number.isInteger(a[b]))return!1;return!0},convertIndexedObectToArray:function(a){var b=[],c;for(c in a)b.push(a[c]);return b},INVALID_COMPRESSED_ARRAY_VALUES_ERROR:{name:"INVALID_COMPRESSED_ARRAY_VALUES_ERROR",message:"Each value in the array be a Javascript Integer type",toString:function(){return this.name+" : "+this.message}}};
Number.isInteger=Number.isInteger||function(a){return"number"===typeof a&&isFinite(a)&&Math.floor(a)===a};
(function(){var h=Handlebars.template;(Handlebars.templates=Handlebars.templates||{})["status-template"]=h({compiler:[7,">= 4.0.0"],main:function(c,a,e,f,d){var b;return null!=(b=e.blockHelperMissing.call(a,c.lambda(a,a),{name:".",hash:{},fn:c.program(1,d,0),inverse:c.noop,data:d}))?b:""},1:function(c,a,e,f,d){var b;return'\t\t\t\t\t<div class="basicTweet" style="display:none;">\n\t\t\t\t\t\t<div class="leftCol"><a href="https://www.twitter.com/'+c.escapeExpression(c.lambda(null!=(b=null!=a?a.user:
a)?b.screen_name:b,a))+'" target="_blank"><img src="'+c.escapeExpression(c.lambda(null!=(b=null!=a?a.user:a)?b.profile_image_url:b,a))+'" /></a></div>\n\t\t\t\t\t\t<div class="rightCol">\n\t\t\t\t\t\t\t<div class="profileInfo">\n\t\t\t\t\t\t\t\t<div class="user">'+c.escapeExpression(c.lambda(null!=(b=null!=a?a.user:a)?b.name:b,a))+'</div> \n\t\t\t\t\t\t\t\t<div class="userLink"><a href="javascript:app.updateUserTimeline(\''+c.escapeExpression(c.lambda(null!=(b=null!=a?a.user:a)?b.screen_name:b,a))+
'\',true)" target="_blank">@'+c.escapeExpression(c.lambda(null!=(b=null!=a?a.user:a)?b.screen_name:b,a))+'</a></div> \n\t\t\t\t\t\t\t\t<div class="tweetDate">('+c.escapeExpression((e.tweetShortDate||a&&a.tweetShortDate||e.helperMissing).call(a,null!=a?a.created_at:a,{name:"tweetShortDate",hash:{},data:d}))+')</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="message"> \n'+(null!=(b=e["if"].call(a,null!=a?a.seecret:a,{name:"if",hash:{},fn:c.program(2,d,0),inverse:c.program(5,d,0),data:d}))?b:
"")+'\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="footer">\n'+(null!=(b=e["if"].call(a,null!=a?a.seecret:a,{name:"if",hash:{},fn:c.program(7,d,0),inverse:c.program(10,d,0),data:d}))?b:"")+"\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n"},2:function(c,a,e,f,d){var b,g;return'\t\t\t\t\t\t\t\t<div class="originalMessage">\n'+(null!=(b=e.each.call(a,null!=a?a.covertexts:a,{name:"each",hash:{},fn:c.program(3,d,0),inverse:c.noop,data:d}))?b:"")+'\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="tworse">\n\t\t\t\t\t\t\t\t\t<div class="seecretLogo"><div class="icon"></div></div>\n\t\t\t\t\t\t\t\t\t<div class="">'+
c.escapeExpression((g=null!=(g=e.seecret||(null!=a?a.seecret:a))?g:e.helperMissing,"function"===typeof g?g.call(a,{name:"seecret",hash:{},data:d}):g))+"</div>\n\t\t\t\t\t\t\t\t</div>  \n"},3:function(c,a,e,f,d){return'\t\t\t\t\t\t\t\t\t\t<div class="messages">\n\t\t\t\t\t\t\t\t\t\t\t<div class="tweetLogo"></div>\n\t\t\t\t\t\t\t\t\t\t\t<div>'+c.escapeExpression(c.lambda(a,a))+"</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n"},5:function(c,a,e,f,d){var b;return'\t\t\t\t\t\t\t\t<div class="tworse">\n\t\t\t\t\t\t\t\t\t<div class="seecretLogo"></div>\n\t\t\t\t\t\t\t\t\t<div class="">'+
c.escapeExpression((b=null!=(b=e.text||(null!=a?a.text:a))?b:e.helperMissing,"function"===typeof b?b.call(a,{name:"text",hash:{},data:d}):b))+"</div>\n\t\t\t\t\t\t\t\t</div>  \n"},7:function(c,a,e,f,d){var b;return'\t\t\t\t\t\t\t\t<div class="tweetActionsDisabled">\n\t\t\t\t\t\t\t\t\t<ul class="tweetActions">\n\t\t\t\t\t\t\t\t\t\t<li class="reply"><div href="" alt="Reply"></div></li>\n\t\t\t\t\t\t\t\t\t\t<li class="retweet"><div href="" alt="ReTweet"></div></li> \x3c!-- if retweet should be \'on\' use class=retweetOn --\x3e\n\t\t\t\t\t\t\t\t\t\t<li class="favorite"><div href="" alt="Favorite"></div></li> \x3c!-- if favorite should be \'on\' use class=favoriteOn --\x3e\n'+
(null!=(b=e["if"].call(a,null!=a?a.follower:a,{name:"if",hash:{},fn:c.program(8,d,0),inverse:c.noop,data:d}))?b:"")+"\t\t\t\t\t\t\t\t\t</ul>\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</div>\n"},8:function(c,a,e,f,d){var b;return'\t\t\t\t\t\t\t\t\t\t<li class="dm">\n\t\t\t\t\t\t\t\t\t\t\t<div class="dm_button3" title="Message" onclick="app.setDirectMessageReceiver(\''+c.escapeExpression(c.lambda(null!=(b=null!=a?a.user:a)?b.id_str:b,a))+"','"+c.escapeExpression(c.lambda(null!=(b=null!=a?a.user:a)?b.screen_name:
b,a))+'\');app.setView(app.DIRECT_MESSAGES_VIEW);">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="fa fa-envelope"></div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</li>\n'},10:function(c,a,e,f,d){var b;return'\t\t\t\t\t\t\t\t<div class="tweetActions">\n\t\t\t\t\t\t\t\t\t<ul class="tweetActions">\n\t\t\t\t\t\t\t\t\t\t<li class="reply"><div href="" alt="Reply"></div></li>\n\t\t\t\t\t\t\t\t\t\t<li class="retweet"><div href="" alt="ReTweet"></div></li> \x3c!-- if retweet should be \'on\' use class=retweetOn --\x3e\n\t\t\t\t\t\t\t\t\t\t<li class="favorite"><div href="" alt="Favorite"></div></li> \x3c!-- if favorite should be \'on\' use class=favoriteOn --\x3e\n'+
(null!=(b=e["if"].call(a,null!=a?a.follower:a,{name:"if",hash:{},fn:c.program(8,d,0),inverse:c.noop,data:d}))?b:"")+"\t\t\t\t\t\t\t\t\t</ul>\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t</div>\n"},useData:!0})})();
(function(){var a=Handlebars.template;(Handlebars.templates=Handlebars.templates||{})["unauthenticated-header-template"]=a({compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){return'\t\t\t<a id="loginButton" href="#" onclick="app.loginToTwitter(); return false;" ><div></div></a>\t\t\n'},useData:!0})})();
(function(){var d=Handlebars.template;(Handlebars.templates=Handlebars.templates||{})["undecrypted-message-content-template"]=d({compiler:[7,">= 4.0.0"],main:function(c,a,d,e,f){var b;return"\t\t\tThis message could not be decrypted.  "+c.escapeExpression(c.lambda(null!=(b=null!=a?a.sender:a)?b.screen_name:b,a))+' may not have your current public key.  You can <input type=button value="Send it" onClick="app.initiateDirectMessages('+c.escapeExpression(c.lambda(null!=(b=null!=a?a.sender:a)?b.id_str:
b,a))+',true)"/> now or first <a href="javascript:app.setView(app.SETTINGS_VIEW)">verify your key in the Settings</a> to be sure.\n'},useData:!0})})();
(function(){var g=Handlebars.template;(Handlebars.templates=Handlebars.templates||{})["user-keys-template"]=g({compiler:[7,">= 4.0.0"],main:function(c,a,e,f,d){var b;return"\t\t<div>\n"+(null!=(b=e["if"].call(a,null!=a?a.privateKey:a,{name:"if",hash:{},fn:c.program(1,d,0),inverse:c.program(6,d,0),data:d}))?b:"")+"\t\t</div>\n"},1:function(c,a,e,f,d){var b;return'\t\t\t\t\t\t<div class="formRow">\n\t\t\t\t\t\t\tGenerated on '+c.escapeExpression(c.lambda(null!=(b=null!=a?a.privateKey:a)?b.dateCreatedDisplay:
b,a))+'\n\t\t\t\t\t\t\t<br/><br/>\n\t\t\t\t\t\t\tPrivate Key:<br/>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<pre id="privateKeyTextarea">'+c.escapeExpression(c.lambda(null!=(b=null!=a?a.privateKey:a)?b.armored:b,a))+'</pre>\n\t\t\t\t\t\t\t\t<button onClick="app.copyContentsToClipboard(\'privateKeyTextarea\')">Copy to clipboard</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="formRow">\n\t\t\t\t\t\t\t<br/>\n\t\t\t\t\t\t\tPassphrase:<br/>\n\t\t\t\t\t\t\t<div>\n'+(null!=(b=e["if"].call(a,
null!=(b=null!=a?a.keyOptions:a)?b.passphrase:b,{name:"if",hash:{},fn:c.program(2,d,0),inverse:c.noop,data:d}))?b:"")+(null!=(b=e.unless.call(a,null!=(b=null!=a?a.keyOptions:a)?b.passphrase:b,{name:"unless",hash:{},fn:c.program(4,d,0),inverse:c.noop,data:d}))?b:"")+'\t\t\t\t\t\t\t\t<br/><br/>\n\t\t\t\t\t\t\t\t<button onClick="app.changePassphrase()">Change passphrase</button>\n\t\t\t\t\t\t\t\t<p/>\n\t\t\t\t\t\t\t\t<br/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t \n\t\t\t\t\t\t<div class="formRow">\n\t\t\t\t\t\t\t<br/>\n\t\t\t\t\t\t\tPublic Key:<br/>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<pre id="publicKeyExport">'+
c.escapeExpression(c.lambda(null!=(b=null!=a?a.publicKey:a)?b.armored:b,a))+"</pre>\n\t\t\t\t\t\t\t\t<button onClick=\"app.copyContentsToClipboard('publicKeyExport')\">Copy to clipboard</button><p/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\t\t\n"},2:function(c,a,e,f,d){var b;return'\t\t\t\t\t\t\t\t<pre id="privateKeyPassphrase" style="font-weight:bold">'+c.escapeExpression(c.lambda(null!=(b=null!=a?a.keyOptions:a)?b.passphrase:b,a))+'</pre><br/>\n\t\t\t\t\t\t\t\t<button onClick="app.copyContentsToClipboard(\'privateKeyPassphrase\')">Copy to clipboard</button><br/><br/>\n\t\t\t\t\t\t\t\t<button onClick="app.deleteSavedPassphrase()">Delete from device</button> <br/>\n\t\t\t\t\t\t\t\t<span class="note">(You\'ll be prompted for it each time.)</span>\t\t\t\t\t\t\t\t\t\t\t\n'},
4:function(c,a,e,f,d){return"\t\t\t\t\t\t\t\tPassphrase not saved. \n"},6:function(c,a,e,f,d){return'\t\t\t\t\t\t<div class="formRow">\n\t\t\t\t\t\t<strong>No private key.  Generate a new one below</strong>\n\t\t\t\t\t\t</div>\n'},useData:!0})})();
